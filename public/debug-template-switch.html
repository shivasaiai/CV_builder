<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Template Switch</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: #f5f7fa;
        }
        .debug-panel {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .debug-panel h3 {
            margin: 0 0 15px 0;
            color: #2d3748;
        }
        .test-btn {
            background: #3182ce;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            margin: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .test-btn:hover {
            background: #2c5282;
        }
        .log-area {
            background: #1a202c;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .status {
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: bold;
        }
        .status.success { background: #f0fff4; color: #22543d; border: 1px solid #9ae6b4; }
        .status.error { background: #fed7d7; color: #742a2a; border: 1px solid #fc8181; }
        .status.info { background: #ebf8ff; color: #2c5282; border: 1px solid #90cdf4; }
    </style>
</head>
<body>
    <div class="debug-panel">
        <h3>ğŸ”§ Template Switch Debug Tool</h3>
        <p>This tool helps debug template switching issues in the resume builder.</p>
        
        <div class="status info" id="status">
            Ready to debug template switching
        </div>
        
        <h4>Quick Tests:</h4>
        <button class="test-btn" onclick="testConsoleLogging()">Test Console Logging</button>
        <button class="test-btn" onclick="testLocalStorage()">Test Local Storage</button>
        <button class="test-btn" onclick="testReactState()">Test React State</button>
        <button class="test-btn" onclick="openBuilderPage()">Open Builder Page</button>
        <button class="test-btn" onclick="clearLogs()">Clear Logs</button>
        
        <h4>Debug Instructions:</h4>
        <ol>
            <li>Open the browser console (F12)</li>
            <li>Navigate to the resume builder page</li>
            <li>Click the "ğŸ“„ Template" button</li>
            <li>Select a different template</li>
            <li>Check the console logs below</li>
        </ol>
        
        <h4>Expected Console Logs:</h4>
        <div class="log-area">
ğŸ”˜ Template button clicked
Current activeTemplate: Clean Chromatic
Available templates: (17) ['Clean Chromatic', 'Contemporary Contrast', ...]
Template modal state changed: true
ğŸ¨ Template Change: "Clean Chromatic" â†’ "Contemporary Contrast"
Available templates: (17) ['Clean Chromatic', 'Contemporary Contrast', ...]
âœ… Template "Contemporary Contrast" found, switching...
ğŸ“‹ Active template updated: Contemporary Contrast
ğŸ¨ ResumePreview rendering with template: Contemporary Contrast
âœ… Successfully rendering template: Contemporary Contrast
âœ… Template change completed: Contemporary Contrast
        </div>
        
        <h4>Live Console Output:</h4>
        <div class="log-area" id="liveConsole">
            Waiting for console output...
        </div>
    </div>

    <div class="debug-panel">
        <h3>ğŸ§ª Template Switch Checklist</h3>
        <div id="checklist">
            <div>â“ Template button exists and is clickable</div>
            <div>â“ Template modal opens when button is clicked</div>
            <div>â“ Template selection triggers handleTemplateChange</div>
            <div>â“ activeTemplate state updates correctly</div>
            <div>â“ ResumePreview re-renders with new template</div>
            <div>â“ Template component renders without errors</div>
        </div>
    </div>

    <script>
        let logCount = 0;
        const liveConsole = document.getElementById('liveConsole');
        const status = document.getElementById('status');
        
        // Capture console logs
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        function addToLiveConsole(type, message) {
            logCount++;
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}\n`;
            
            if (liveConsole.textContent === 'Waiting for console output...') {
                liveConsole.textContent = '';
            }
            
            liveConsole.textContent += logEntry;
            liveConsole.scrollTop = liveConsole.scrollHeight;
            
            // Update status
            if (type === 'error') {
                status.className = 'status error';
                status.textContent = `âŒ Error detected - Check console logs (${logCount} logs)`;
            } else if (message.includes('Template change completed')) {
                status.className = 'status success';
                status.textContent = `âœ… Template switch successful! (${logCount} logs)`;
            } else {
                status.className = 'status info';
                status.textContent = `ğŸ”„ Debugging in progress... (${logCount} logs)`;
            }
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToLiveConsole('log', args.join(' '));
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToLiveConsole('error', args.join(' '));
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToLiveConsole('warn', args.join(' '));
        };
        
        function testConsoleLogging() {
            console.log('ğŸ§ª Test log message');
            console.warn('ğŸ§ª Test warning message');
            console.error('ğŸ§ª Test error message');
        }
        
        function testLocalStorage() {
            try {
                localStorage.setItem('debug-test', 'working');
                const value = localStorage.getItem('debug-test');
                console.log('âœ… LocalStorage test:', value === 'working' ? 'PASSED' : 'FAILED');
                localStorage.removeItem('debug-test');
            } catch (e) {
                console.error('âŒ LocalStorage test failed:', e.message);
            }
        }
        
        function testReactState() {
            console.log('ğŸ§ª Testing React state simulation...');
            let mockState = 'Clean Chromatic';
            console.log('Initial state:', mockState);
            
            setTimeout(() => {
                mockState = 'Contemporary Contrast';
                console.log('State updated:', mockState);
                console.log('âœ… React state simulation completed');
            }, 100);
        }
        
        function openBuilderPage() {
            const builderUrl = '/builder/test';
            console.log('ğŸ”— Opening builder page:', builderUrl);
            window.open(builderUrl, '_blank');
        }
        
        function clearLogs() {
            liveConsole.textContent = 'Logs cleared...';
            logCount = 0;
            status.className = 'status info';
            status.textContent = 'Ready to debug template switching';
        }
        
        // Initialize
        console.log('ğŸ”§ Debug tool initialized');
        console.log('ğŸ“ Instructions: Open builder page and test template switching');
    </script>
</body>
</html>